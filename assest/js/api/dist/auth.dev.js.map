{"version":3,"sources":["auth.js"],"names":["alertMessage","message","toast","document","createElement","className","textContent","body","appendChild","setTimeout","remove","login","email","getElementById","value","password","pb","collection","authWithPassword","window","location","href","console","error","data","signup","firstName","trim","lastName","passwordConfirm","name","length","signupData","create","loginForm","signupForm","showSignup","showLogin","addEventListener","e","preventDefault","classList","add","loginButton","signupButton","show","hide","confirmPassword","style","display","type"],"mappings":"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","sourcesContent":["import  { pb , isAuthenticated } from './pocketbase.js';\n\nfunction alertMessage(message) {\n    const toast = document.createElement(\"div\");\n    toast.className = \"toast\";\n    toast.textContent = message;\n    document.body.appendChild(toast);\n    setTimeout(() => {\n    toast.remove();\n    }, 2000);\n}\n\nasync function login() {\n    const email = document.getElementById('loginEmail').value;\n    const password = document.getElementById('loginPassword').value;\n\n    try {\n        await pb.collection('users').authWithPassword(email, password);\n        alertMessage('Login successful');\n        if(isAuthenticated()) {\n            window.location.href = '/public/products.html';\n        }\n    } catch (error) {\n        alertMessage(error.message);\n        console.error(error.data);\n    }\n}\n\nasync function signup() {\n    const firstName = document.getElementById('firstName').value.trim();\n    const lastName = document.getElementById('lastName').value.trim();\n    const email = document.getElementById('signupEmail').value.trim();\n    const password = document.getElementById('signupPassword').value;\n    const passwordConfirm = document.getElementById('confirmPassword').value;\n    const name = `${firstName} ${lastName}`;\n\n    if(!email || !password || !passwordConfirm) {\n        alertMessage('Please fill in all fields');\n        return; \n    } \n    \n    if (password.length < 8) {\n        alertMessage('Password must be at least 8 characters');\n        return;\n    } \n    \n    if (password !== passwordConfirm) {\n        alertMessage('Passwords do not match');\n        return;\n    }\n\n    const signupData = {\n        \"email\": email,\n        \"emailVisibility\": true,\n        \"name\": name,\n        \"password\": password,\n        \"passwordConfirm\": passwordConfirm\n    };\n\n    try {\n        await pb.collection('users').create(signupData);\n        await pb.collection('users').authWithPassword(email, password);\n        alertMessage('Signup successful');\n        window.location.href = '/public/products.html';\n    } catch (error) {\n        alertMessage(error.message);\n        console.error(error.data);\n    }\n}\n\n\n// Event Listeners\n        const loginForm = document.getElementById('loginForm');\n        const signupForm = document.getElementById('signupForm');\n        const showSignup = document.getElementById('showSignup');\n        const showLogin = document.getElementById('showLogin');\n\n        showSignup.addEventListener('click', (e) => {\n            e.preventDefault();\n            loginForm.classList.remove('active');\n            signupForm.classList.add('active');\n        });\n\n        showLogin.addEventListener('click', (e) => {\n            e.preventDefault();\n            signupForm.classList.remove('active');\n            loginForm.classList.add('active');\n        });\n\n        const loginButton = document.getElementById('loginBtn');\n        loginButton.addEventListener('click', (e) => {\n            e.preventDefault();\n            login();\n        });\n\n        const signupButton = document.getElementById('signupBtn');\n        signupButton.addEventListener('click', (e) => {\n            e.preventDefault();\n            signup();\n        });\n\nconst show = document.getElementById('showPassword');\nconst hide = document.getElementById('hidePassword');\nconst password = document.getElementById('signupPassword');\nconst confirmPassword = document.getElementById('confirmPassword');\nhide.style.display = 'none';\n\nshow.addEventListener('click', () => {\n  password.type = 'text';\n  confirmPassword.type = 'text';\n  hide.style.display = 'block';\n  show.style.display = 'none';\n});\n\nhide.addEventListener('click', () => {\n  password.type = 'password';\n  confirmPassword.type = 'password';\n  show.style.display = 'block';\n  hide.style.display = 'none';\n});"],"file":"auth.dev.js"}