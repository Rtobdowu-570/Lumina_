{"version":3,"sources":["auth.js"],"names":["_pocketbase","require","alertMessage","message","toast","document","createElement","className","appendChild","textContent","remove","setTimeout","login","email","password","regeneratorRuntime","async","_context","prev","next","getElementById","value","awrap","pb","collection","authWithPassword","isAuthenticated","t0","console","error","data","stop","signup","firstName","lastName","passwordConfirm","name","signupData","_context2","trim","window","location","href","concat","abrupt","length","emailVisibility","loginForm","signupForm","showSignup","showLogin","e","preventDefault","classList","add","addEventListener","loginButton","signupButton","show","hide","confirmPassword","style","display","type"],"mappings":"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","file":"auth.min.js","sourcesContent":["import  { pb , isAuthenticated } from './pocketbase.js';\n\nfunction alertMessage(message) {\n    const toast = document.createElement(\"div\");\n    toast.className = \"toast\";\n    toast.textContent = message;\n    document.body.appendChild(toast);\n    setTimeout(() => {\n    toast.remove();\n    }, 2000);\n}\n\nasync function login() {\n    const email = document.getElementById('loginEmail').value;\n    const password = document.getElementById('loginPassword').value;\n\n    try {\n        await pb.collection('users').authWithPassword(email, password);\n        alertMessage('Login successful');\n        if(isAuthenticated()) {\n            window.location.href = '/public/products.html';\n        }\n    } catch (error) {\n        alertMessage(error.message);\n        console.error(error.data);\n    }\n}\n\nasync function signup() {\n    const firstName = document.getElementById('firstName').value.trim();\n    const lastName = document.getElementById('lastName').value.trim();\n    const email = document.getElementById('signupEmail').value.trim();\n    const password = document.getElementById('signupPassword').value;\n    const passwordConfirm = document.getElementById('confirmPassword').value;\n    const name = `${firstName} ${lastName}`;\n\n    if(!email || !password || !passwordConfirm) {\n        alertMessage('Please fill in all fields');\n        return; \n    } \n    \n    if (password.length < 8) {\n        alertMessage('Password must be at least 8 characters');\n        return;\n    } \n    \n    if (password !== passwordConfirm) {\n        alertMessage('Passwords do not match');\n        return;\n    }\n\n    const signupData = {\n        \"email\": email,\n        \"emailVisibility\": true,\n        \"name\": name,\n        \"password\": password,\n        \"passwordConfirm\": passwordConfirm\n    };\n\n    try {\n        await pb.collection('users').create(signupData);\n        await pb.collection('users').authWithPassword(email, password);\n        alertMessage('Signup successful');\n        window.location.href = '/public/products.html';\n    } catch (error) {\n        alertMessage(error.message);\n        console.error(error.data);\n    }\n}\n\n\n// Event Listeners\n        const loginForm = document.getElementById('loginForm');\n        const signupForm = document.getElementById('signupForm');\n        const showSignup = document.getElementById('showSignup');\n        const showLogin = document.getElementById('showLogin');\n\n        showSignup.addEventListener('click', (e) => {\n            e.preventDefault();\n            loginForm.classList.remove('active');\n            signupForm.classList.add('active');\n        });\n\n        showLogin.addEventListener('click', (e) => {\n            e.preventDefault();\n            signupForm.classList.remove('active');\n            loginForm.classList.add('active');\n        });\n\n        const loginButton = document.getElementById('loginBtn');\n        loginButton.addEventListener('click', (e) => {\n            e.preventDefault();\n            login();\n        });\n\n        const signupButton = document.getElementById('signupBtn');\n        signupButton.addEventListener('click', (e) => {\n            e.preventDefault();\n            signup();\n        });\n\nconst show = document.getElementById('showPassword');\nconst hide = document.getElementById('hidePassword');\nconst password = document.getElementById('signupPassword');\nconst confirmPassword = document.getElementById('confirmPassword');\nhide.style.display = 'none';\n\nshow.addEventListener('click', () => {\n  password.type = 'text';\n  confirmPassword.type = 'text';\n  hide.style.display = 'block';\n  show.style.display = 'none';\n});\n\nhide.addEventListener('click', () => {\n  password.type = 'password';\n  confirmPassword.type = 'password';\n  show.style.display = 'block';\n  hide.style.display = 'none';\n});"]}