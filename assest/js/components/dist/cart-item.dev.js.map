{"version":3,"sources":["cart-item.js"],"names":["CartItem","element","config","title","message","confirmText","cancelText","onConfirm","pb","collection","dataset","id","classList","add","setTimeout","remove","updateCart","console","error","onCancel","modal","document","querySelector","Modal","show","window","dispatchEvent","CustomEvent","toast","createElement","className","textContent","body","appendChild"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;IACMA,Q;;;;;;;;;2BAEGC,O,EAAS;AAAA;;AACd,UAAMC,MAAM,GAAG;AACbC,QAAAA,KAAK,EAAE,aADM;AAEbC,QAAAA,OAAO,EAAE,2DAFI;AAGbC,QAAAA,WAAW,EAAE,QAHA;AAIbC,QAAAA,UAAU,EAAE,QAJC;AAKbC,QAAAA,SAAS,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,uBACLN,OADK;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,kDAICO,eAAGC,UAAH,CAAc,MAAd,YAA6BR,OAAO,CAACS,OAAR,CAAgBC,EAA7C,CAJD;;AAAA;AAKLV,kBAAAA,OAAO,CAACW,SAAR,CAAkBC,GAAlB,CAAsB,UAAtB;AACAC,kBAAAA,UAAU,CAAC,YAAM;AACfb,oBAAAA,OAAO,CAACc,MAAR;;AACA,oBAAA,KAAI,CAACC,UAAL;AACD,mBAHS,EAGP,GAHO,CAAV;AANK;AAAA;;AAAA;AAAA;AAAA;AAWLC,kBAAAA,OAAO,CAACC,KAAR,CAAc,6BAAd;;AAXK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SALE;AAoBbC,QAAAA,QAAQ,EAAE,oBAAM;AACd,cAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;;AACA,cAAIF,KAAJ,EAAW;AACTA,YAAAA,KAAK,CAACR,SAAN,CAAgBG,MAAhB,CAAuB,MAAvB;AACAD,YAAAA,UAAU,CAAC;AAAA,qBAAMM,KAAK,CAACL,MAAN,EAAN;AAAA,aAAD,EAAuB,GAAvB,CAAV;AACD;AACF;AA1BY,OAAf;AA4BA,UAAMK,KAAK,GAAG,IAAIG,YAAJ,CAAUrB,MAAV,CAAd;AACAkB,MAAAA,KAAK,CAACI,IAAN;AACD;;;iCAEY;AACXC,MAAAA,MAAM,CAACC,aAAP,CAAqB,IAAIC,WAAJ,CAAgB,cAAhB,CAArB;AACD;;;8BAESvB,O,EAAS;AACjB,UAAMwB,KAAK,GAAGP,QAAQ,CAACQ,aAAT,CAAuB,KAAvB,CAAd;AACAD,MAAAA,KAAK,CAACE,SAAN,GAAkB,OAAlB;AACAF,MAAAA,KAAK,CAACG,WAAN,GAAoB3B,OAApB;AACAiB,MAAAA,QAAQ,CAACW,IAAT,CAAcC,WAAd,CAA0BL,KAA1B;AAEAd,MAAAA,UAAU,CAAC;AAAA,eAAMc,KAAK,CAAChB,SAAN,CAAgBC,GAAhB,CAAoB,MAApB,CAAN;AAAA,OAAD,EAAoC,EAApC,CAAV;AACAC,MAAAA,UAAU,CAAC,YAAM;AACfc,QAAAA,KAAK,CAAChB,SAAN,CAAgBG,MAAhB,CAAuB,MAAvB;AACAD,QAAAA,UAAU,CAAC;AAAA,iBAAMc,KAAK,CAACb,MAAN,EAAN;AAAA,SAAD,EAAuB,GAAvB,CAAV;AACD,OAHS,EAGP,IAHO,CAAV;AAID","sourcesContent":["import {  Modal } from \"../components/modal.js\";\nimport { pb } from \"../api/pocketbase.js\";\nclass CartItem {\n\n  remove(element) {\n    const config = {\n      title: \"Remove Item\",\n      message: \"Are you sure you want to remove this item from your cart?\",\n      confirmText: \"Remove\",\n      cancelText: \"Cancel\",\n      onConfirm: async () => {\n        if (element) {\n          try {\n            // Delete from server\n            await pb.collection('cart').delete(element.dataset.id);\n            element.classList.add(\"removing\");\n            setTimeout(() => {\n              element.remove();\n              this.updateCart();\n            }, 300);\n          } catch (err) {\n            console.error('Failed to delete cart item:', err);\n          }\n        }\n      },\n      onCancel: () => {\n        const modal = document.querySelector(\".modal\");\n        if (modal) {\n          modal.classList.remove(\"show\");\n          setTimeout(() => modal.remove(), 300);\n        }\n      },\n    };\n    const modal = new Modal(config);\n    modal.show();\n  }\n\n  updateCart() {\n    window.dispatchEvent(new CustomEvent(\"cart-updated\"));\n  }\n\n  showToast(message) {\n    const toast = document.createElement(\"div\");\n    toast.className = \"toast\";\n    toast.textContent = message;\n    document.body.appendChild(toast);\n\n    setTimeout(() => toast.classList.add(\"show\"), 10);\n    setTimeout(() => {\n      toast.classList.remove(\"show\");\n      setTimeout(() => toast.remove(), 300);\n    }, 3000);\n  }\n}\n\nexport { CartItem };\n"],"file":"cart-item.dev.js"}