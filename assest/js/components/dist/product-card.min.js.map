{"version":3,"sources":["product-card.js"],"names":["ProductCard","product","_classCallCheck","this","id","name","price","image","concat","category","toLowerCase","trim","replace","rating","reviews","badge","description","quantity","isFeatured","isWhitelisted","originalPrice","document","createElement","card","generateStars","toFixed","attachEventListeners","output","i","Math","floor","element","addEventListener","action","e","_this","stopPropagation","btn","target","closest","whitelist","window","addToCart","location","href","showToast","dispatchEvent","CustomEvent","detail","classList","cardElement","querySelector","textContent","toggle","toast","setTimeout","remove","className","innerHTML","message","body","appendChild"],"mappings":"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","file":"product-card.min.js","sourcesContent":["class ProductCard {\n  constructor(product) {\n    if (!product) return;\n    this.id = product.id;\n    this.name = product.name;\n    this.price = product.price;\n    this.image = `http://127.0.0.1:8090/api/files/products/${product.id}/${product.image}`;\n    this.category = product.category.toLowerCase().trim().replace(/\\s+/g, '-').replace(/&/g, 'and');\n    this.rating = product.rating || 0;\n    this.reviews = product.reviews || 0;\n    this.badge = product.badge;\n    this.description = product.description;\n    this.quantity = product.quantity;\n    this.isFeatured = product.isFeatured || false;\n    this.isWhitelisted = product.isWhitelisted || false;\n    this.originalPrice = product.originalPrice;\n  }\n\n  render() {\n    const card = document.createElement(\"div\");\n    card.className = \"product-cards\";\n    card.dataset.id = this.id;\n    card.dataset.category = this.category;\n    card.dataset.price = this.price;\n    card.dataset.name = this.name;\n    card.dataset.rating = this.rating;\n    card.dataset.quantity = this.quantity;\n\n    card.innerHTML = `\n          <div class=\"product-card-home\">\n        ${this.quantity > 0 ? `<span class=\"product-badge badge-sale\">Sale</span>` : `<span class=\"product-badge badge-sold-out\">Sold Out</span>`}\n\n        <button class=\"whitelist-btn ${this.isWhitelisted ? \"active\" : \"\"}\" data-action=\"whitelist\">\n            ${this.isWhitelisted ? \"♥\" : \"♡\"}\n        </button>\n\n        <a href=\"product-detail.html?id=${this.id}\" class=\"product-image-home\">\n          <img src=\"${this.image}\" alt=\"${this.name}\" />\n        </a>\n        <div class=\"product-info-home\">\n          <span class=\"product-category-home\">${this.category}</span>\n          <h3 class=\"product-name-home\">${this.name}</h3>\n          <div class=\"product-rating\">\n                <span class=\"stars\">${this.generateStars()}</span>\n                <span class=\"rating-count\">${this.rating} (${this.reviews}) reviews</span>\n            </div>\n          <div class=\"product-footer-home\">\n            <div class=\"product-price-home\">\n              <span class=\"price-current\" data-price=\"${this.price}\">$${this.price.toFixed(2)}</span>\n              ${this.originalPrice ? `<span class=\"price-original\">$${this.originalPrice.toFixed(2)}</span>` : \"\"}\n            </div>\n            <button class=\"btn-icon\" aria-label=\"Add to cart\" data-action=\"add-to-cart\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n                <path d=\"M2 2H3.5L4.5 4M4.5 4L6.5 14H16.5L18.5 6H4.5Z\" stroke=\"currentColor\" stroke-width=\"2\"/>\n                <circle cx=\"7\" cy=\"18\" r=\"1\" fill=\"currentColor\"/>\n                <circle cx=\"16\" cy=\"18\" r=\"1\" fill=\"currentColor\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>`\n    ;\n    this.attachEventListeners(card);\n    return card;\n  }\n\n  generateStars() {\n    let output = '';\n    for (let i = 0; i < 5; i++) {\n        if (i < Math.floor(this.rating)) {\n            output += `<span class=\"star filled\">★</span>`;\n        } else if (i < this.rating) {\n            output += `<span class=\"star half\">★</span>`;\n        } else {\n            output += `<span class=\"star\">☆</span>`;\n        }\n    }\n    return output;\n  }\n\n  attachEventListeners(element) {\n    element.addEventListener(\"click\", (e) => {\n      const btn = e.target.closest('button');\n      const action = btn ? btn.dataset.action : null;\n      if (action === \"add-to-cart\") {\n        e.stopPropagation();\n        this.addToCart();\n      } else if (action === \"whitelist\") {\n        e.stopPropagation();\n        this.whitelist(element);\n      } else {\n        window.location.href = `product-detail.html?id=${this.id}`;\n      }\n    });\n  }\n\n  addToCart() {\n    this.showToast(\"Added to cart!\");\n    window.dispatchEvent(\n      new CustomEvent(\"product-added-to-cart\", { detail: this }),\n    );\n  }\n\n  whitelist(cardElement) {\n   this.isWhitelisted = !this.isWhitelisted;\n    const btn = cardElement.querySelector(\".whitelist-btn\");\n    btn.textContent = this.isWhitelisted ? \"♥\" : \"♡\";\n    btn.classList.toggle(\"active\", this.isWhitelisted);\n    this.showToast(this.isWhitelisted ? \"Added to Whitelist\" : \"Removed from Whitelist\");\n  }\n\n  toggleWhitelist(element) {\n    if (!element) return;\n    \n    this.isWhitelisted = !this.isWhitelisted;\n    const btn = element.querySelector(\".whitelist-btn\");\n    btn.textContent = this.isWhitelisted ? \"♥\" : \"♡\";\n    btn.classList.toggle(\"active\", this.isWhitelisted);\n    this.showToast(\n      this.isWhitelisted ? \"Added to Whitelist\" : \"Removed from Whitelist\",\n    );\n  }\n\n  showToast(message) {\n    const toast = document.createElement(\"div\");\n    toast.className = \"toast\";\n    toast.innerHTML = message;\n    document.body.appendChild(toast);\n    setTimeout(() => {\n      toast.remove();\n    }, 2000);\n  }\n}\n\nexport { ProductCard };\n"]}