{"version":3,"sources":["dashboard.js"],"names":["checkAuth","window","location","href","displayUsername","user","getCurrentUser","userName","document","querySelector","name","textContent","user_name","pb","authStore","model","logOut","clear","displayUserData","userId","id","collection","getOne","output","avatar","email","container","innerHTML","console","log","warn","error","addEventListener"],"mappings":";;;;;;;;;;AAAA;;AAEA;AACA,SAASA,SAAT,GAAqB;AACjB,MAAI,CAAC,kCAAL,EAAwB;AACpBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,wBAAvB;AACH;AACJ;;AAED,SAASC,eAAT,GAA2B;AACvB,MAAMC,IAAI,GAAIC,cAAc,EAA5B;AACA,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAjB;;AAEA,MAAI,kCAAJ,EAAuB;AACrB,QAAGJ,IAAI,CAACK,IAAR,EAAc;AACZH,MAAAA,QAAQ,CAACI,WAAT,GAAuBN,IAAI,CAACK,IAA5B;AACD,KAFD,MAEO;AACLH,MAAAA,QAAQ,CAACI,WAAT,GAAuBN,IAAI,CAACO,SAA5B;AACD;AACF,GAND,MAOK;AACHL,IAAAA,QAAQ,CAACI,WAAT,GAAuB,OAAvB;AACL;AACA;;AAED,SAASL,cAAT,GAA0B;AACtB,SAAOO,eAAGC,SAAH,CAAaC,KAApB;AACH;;AAED,SAASC,MAAT,GAAkB;AACdH,iBAAGC,SAAH,CAAaG,KAAb;;AACAhB,EAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,kBAAvB;AACH;;AAED,SAAee,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cACS,kCADT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAEUC,UAAAA,MAFV,GAEmBN,eAAGC,SAAH,CAAaC,KAAb,GAAqBF,eAAGC,SAAH,CAAaC,KAAb,CAAmBK,EAAxC,GAA6C,IAFhE;;AAAA,cAGSD,MAHT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,0CAM2BN,eAAGQ,UAAH,CAAc,OAAd,EAAuBC,MAAvB,CAA8BH,MAA9B,CAN3B;;AAAA;AAMcd,UAAAA,IANd;AAQckB,UAAAA,MARd,wFAUgClB,IAAI,CAACmB,MAAL,IAAe,gCAV/C,sBAUyFnB,IAAI,CAACK,IAAL,IAAa,EAVtG,yJAY8CL,IAAI,CAACK,IAAL,IAAa,EAZ3D,udAiB8CL,IAAI,CAACoB,KAAL,IAAc,EAjB5D;AAoBcC,UAAAA,SApBd,GAoB0BlB,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CApB1B;;AAqBQ,cAAIiB,SAAJ,EAAe;AACXA,YAAAA,SAAS,CAACC,SAAV,GAAsBJ,MAAtB;AACAK,YAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCH,SAAxC;AACH,WAHD,MAGO;AACHE,YAAAA,OAAO,CAACE,IAAR,CAAa,kCAAb;AACH;;AA1BT;AAAA;;AAAA;AAAA;AAAA;AA4BQF,UAAAA,OAAO,CAACG,KAAR,CAAc,+BAAd;;AA5BR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgCAvB,QAAQ,CAACwB,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAChDhC,EAAAA,SAAS;AACTI,EAAAA,eAAe;AACfc,EAAAA,eAAe;AAClB,CAJD","sourcesContent":["import { pb, isAuthenticated } from '../api/pocketbase.js';\n\n// prevent user from viewing dashboard if not logged in\nfunction checkAuth() {\n    if (!isAuthenticated()) {\n        window.location.href = '/public/auth/auth.html';\n    }\n}\n\nfunction displayUsername() {\n    const user =  getCurrentUser()\n    const userName = document.querySelector('.user-name');\n\n    if (isAuthenticated()) {\n      if(user.name) {\n        userName.textContent = user.name;\n      } else {\n        userName.textContent = user.user_name;\n      }\n    }\n    else {\n      userName.textContent = \"Guest\";\n}\n}\n\nfunction getCurrentUser() {\n    return pb.authStore.model;\n}\n\nfunction logOut() {\n    pb.authStore.clear(); \n    window.location.href = '/auth/login.html';\n}\n\nasync function displayUserData() {\n    if (!isAuthenticated()) return;\n    const userId = pb.authStore.model ? pb.authStore.model.id : null;\n    if (!userId) return;\n\n    try {\n        const user = await pb.collection('users').getOne(userId);\n\n        const output = `\n                <div class=\"stat-img\">\n                    <img src=\"${user.avatar || '/assest/images/placeholder.jpg'}\" alt=\"${user.name || ''}\" class=\"user-avatar stat\"></div>\n                <div class=\"stat-content user-data\">\n                    <div class=\"stat-value\">${user.name || ''} <span class=\"edit-profile-btn\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#FF5C5C\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"></path>\n                    </svg>\n                    </span></div>\n                    <div class=\"stat-label\">${user.email || ''}</div>\n                </div>`;\n        \n        const container = document.querySelector('.user-stats');\n        if (container) {\n            container.innerHTML = output;\n            console.log('User data rendered into:', container);\n        } else {\n            console.warn('No container found for user data');\n        }\n    } catch (err) {\n        console.error('Failed to fetch current user:', err);\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    checkAuth();\n    displayUsername();\n    displayUserData();\n});\n\nexport { logOut, getCurrentUser, checkAuth, displayUsername };"],"file":"dashboard.dev.js"}