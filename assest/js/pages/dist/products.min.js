"use strict";var _productCard=require("../components/product-card.js"),_pocketbase=require("../api/pocketbase.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var UI=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"reduceCategoryList",value:function(){var e=document.querySelectorAll(".category");Array.from(e).forEach(function(e,t){10<=t&&(e.style.display="none")})}},{key:"addProduct",value:function(){var t,r,n,a,o,c,s,u,i,l,d,m,p,v,y,f,g,b,h,E,w,C,A,k,N,x,S,L,q,I,P,B,_,M,F,U,R,G,O,D,H,T,j,z,V,J,K,W,Q,$;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("div")).className="product-form-overlay",(r=document.createElement("div")).className="product-form-card",(n=document.createElement("div")).className="product-form-header",(a=document.createElement("div")).className="product-form-header-content",(o=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),o.setAttribute("height","24"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),(c=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"),o.appendChild(c),(s=document.createElement("div")).className="product-form-icon",s.appendChild(o),u=document.createElement("div"),(i=document.createElement("h2")).className="product-form-title",i.textContent="Add New Product",(l=document.createElement("p")).className="product-form-description",l.textContent="Fill in the details to add a product to your store",u.append(i,l),a.append(s,u),(d=document.createElement("button")).className="product-form-close",d.type="button",d.setAttribute("aria-label","Close"),d.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),(m=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.setAttribute("stroke","currentColor"),m.setAttribute("stroke-width","2"),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),(p=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","18"),p.setAttribute("y1","6"),p.setAttribute("x2","6"),p.setAttribute("y2","18"),(v=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","6"),v.setAttribute("y1","6"),v.setAttribute("x2","18"),v.setAttribute("y2","18"),m.append(p,v),d.appendChild(m),n.append(a,d),(y=document.createElement("div")).className="product-form-content",(f=document.createElement("form")).className="product-form",(g=document.createElement("div")).className="form-group",(b=document.createElement("label")).className="form-label",b.setAttribute("for","productName"),b.textContent="Product Name",(h=document.createElement("input")).type="text",h.id="productName",h.className="form-input",h.placeholder="Enter product name",h.required=!0,h.name="name",g.append(b,h),(E=document.createElement("div")).className="form-group",(w=document.createElement("label")).className="form-label",w.textContent="Product Image",(C=document.createElement("div")).className="image-upload-container",(A=document.createElement("label")).className="image-upload-label",(k=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","40"),k.setAttribute("height","40"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.setAttribute("stroke","currentColor"),k.setAttribute("stroke-width","2"),k.setAttribute("stroke-linecap","round"),k.setAttribute("stroke-linejoin","round"),(N=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x","3"),N.setAttribute("y","3"),N.setAttribute("width","18"),N.setAttribute("height","18"),N.setAttribute("rx","2"),N.setAttribute("ry","2"),(x=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","8.5"),x.setAttribute("cy","8.5"),x.setAttribute("r","1.5"),(S=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","21 15 16 10 5 21"),k.append(N,x,S),(L=document.createElement("span")).className="upload-text",L.textContent="Click to upload image",(q=document.createElement("span")).className="upload-subtext",q.textContent="PNG, JPG up to 5MB",(I=document.createElement("input")).type="file",I.className="hidden-input",I.accept="image/*",I.name="image",I.addEventListener("change",function(){var e=I.files[0];e&&(L.textContent=e.name,q.textContent=e.size+" bytes",k.style.display="none")}),A.append(k,L,q,I),C.appendChild(A),E.append(w,C),(P=document.createElement("div")).className="form-group",(B=document.createElement("label")).className="form-label",B.setAttribute("for","category"),B.textContent="Category",(_=document.createElement("select")).id="category",_.className="form-select",_.required=!0,_.name="category",(M=document.createElement("option")).value="",M.textContent="Select a category",["Travel & Luggage","Shoes & Footwear","Kitchen & Dining","Tools & Home Improvement","Musical Instruments","Arts & Crafts","Fitness Equipment","Watches","Bags & Handbags","Gardening & Outdoor Living","Video Games & Consoles","Eyewear & Sunglasses","Bedding & Bath","Camping & Hiking","Party Supplies","Appliances","Mobile Phones & Accessories","Computers & Laptops","Lighting & Fans","Men's Clothing","Women's Clothing","Kids' Clothing","Skincare & Makeup","Vitamins & Supplements","Cycling & Bikes","Board Games & Puzzles","Movies & TV Shows","Beverages & Drinks","Pet Food & Treats","Home Storage & Organization","Baby Essentials","Fine Jewelry","Car Parts & Accessories","Stationery & School Supplies","Outdoor Power Equipment","Electronics","Fashion & Apparel","Home & Garden","Beauty & Personal Care","Health & Wellness","Sports & Outdoors","Toys & Games","Books & Media","Food & Grocery","Pet Supplies","Furniture & Decor","Baby & Kids","Jewelry & Accessories","Automotive","Office Supplies"].forEach(function(e){var t=document.createElement("option");t.value=e.toLowerCase().replace(/ & /g,"-").replace(/[^a-z0-9-]/g,""),t.textContent=e,t.dataset.category=e,_.appendChild(t)}),_.appendChild(M),_.insertBefore(M,_.firstChild),P.append(B,_),(F=document.createElement("div")).className="form-row",(U=document.createElement("div")).className="form-group",(R=document.createElement("label")).className="form-label",R.setAttribute("for","price"),R.textContent="Price",(G=document.createElement("div")).className="price-input-wrapper",(O=document.createElement("span")).className="price-symbol",O.textContent="$",(D=document.createElement("input")).type="number",D.id="price",D.className="form-input price-input",D.placeholder="0.00",D.step="0.01",D.min="0",D.required=!0,D.name="price",G.append(O,D),U.append(R,G),(H=document.createElement("div")).className="form-group",(T=document.createElement("label")).className="form-label",T.setAttribute("for","quantity"),T.textContent="Quantity",(j=document.createElement("input")).type="number",j.id="quantity",j.className="form-input",j.placeholder="0",j.min="0",j.required=!0,j.name="quantity",H.append(T,j),F.append(U,H),(z=document.createElement("div")).className="form-group",(V=document.createElement("label")).className="form-label",V.setAttribute("for","description"),V.textContent="Description",(J=document.createElement("span")).className="optional-text",J.textContent="(Optional)",V.appendChild(J),(K=document.createElement("textarea")).id="description",K.className="form-textarea",K.rows=4,K.placeholder="Enter product description...",K.name="description",z.append(V,K),(W=document.createElement("div")).className="form-actions",(Q=document.createElement("button")).type="submit",Q.className="btn-submit",Q.textContent="Add Product",($=document.createElement("button")).type="button",$.className="btn-cancel",$.textContent="Cancel",$.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),W.append(Q,$),f.append(E,g,P,F,z,W),y.appendChild(f),r.append(n,y),t.appendChild(r),document.body.appendChild(t),f.addEventListener("submit",function(t){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={image:I.files[0],name:h.value,category:_.value,price:D.value,quantity:j.value,description:K.value},(n=new FormData).append("image",r.image),n.append("name",r.name),n.append("category",r.category),n.append("price",r.price),n.append("quantity",r.quantity),n.append("description",r.description),e.prev=9,e.next=12,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").create(n));case 12:console.log("Product added successfully"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.log("ERROR",e.t0.details);case 18:document.querySelector(".product-form-overlay").classList.remove("active");case 20:case"end":return e.stop()}},null,null,[[9,15]])});case 218:case"end":return e.stop()}})}},{key:"getProducts",value:function(){var t,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getFullList());case 3:if(t=e.sent,r=document.getElementById("products-grid")){e.next=7;break}return e.abrupt("return");case 7:r.innerHTML="",t.forEach(function(e){var t=new _productCard.ProductCard(e);r.appendChild(t.render())}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Failed to load products:",e.t0);case 14:case"end":return e.stop()}},null,null,[[0,11]])}},{key:"increaseCategoryList",value:function(){var e=document.querySelectorAll(".category"),r=Array.from(e);r.forEach(function(e,t){r.length-1?e.style.display="block":e.style.display="none"})}},{key:"priceRange",value:function(){function r(){var e=n.value/s*100,t=100-a.value/s*100;c.style.left=e+"%",c.style.right=t+"%"}var n=document.querySelector(".range-min"),a=document.querySelector(".range-max"),o=document.querySelector(".input-min"),t=document.querySelector(".input-max"),c=document.querySelector(".price-slider .range-track"),s=parseInt(a.max),u=1e3;n.addEventListener("input",function(){var e=parseInt(n.value),t=parseInt(a.value);t-e<u&&(n.value=t-u),o.value=n.value,r(),i.filterProducts()}),a.addEventListener("input",function(){var e=parseInt(n.value);parseInt(a.value)-e<u&&(a.value=e+u),t.value=a.value,r(),i.filterProducts()}),o.addEventListener("change",function(){var e=parseInt(o.value);e>=parseInt(a.value)-u&&(e=parseInt(a.value)-u,o.value=e),n.value=e,r(),i.filterProducts()}),t.addEventListener("change",function(){var e=parseInt(t.value);e<=parseInt(n.value)+u&&(e=parseInt(n.value)+u,t.value=e),a.value=e,r(),i.filterProducts()}),r()}},{key:"createProduct",value:function(){(0,_pocketbase.isAuthenticated)()?i.addProduct():window.location.href="/public/auth/auth.html"}},{key:"displayUserName",value:function(){var e=(0,_pocketbase.getCurrentUser)(),t=document.querySelector(".user-name");(0,_pocketbase.isAuthenticated)()?e.name?t.textContent=e.name:t.textContent=e.user_name:t.textContent="Guest"}},{key:"logout",value:function(){_pocketbase.pb.authStore.clear(),window.location.href="index.html"}},{key:"filterProducts",value:function(){var o=Array.from(document.querySelectorAll('.category input[type="checkbox"]:checked')).map(function(e){return e.closest(".category").dataset.category}),c=parseInt(document.querySelector(".input-min").value),s=parseInt(document.querySelector(".input-max").value);document.querySelectorAll(".product-cards").forEach(function(e){var t=e.dataset.category,r=parseFloat(e.dataset.price),n=0===o.length||o.includes(t),a=c<=r&&r<=s;e.style.display=n&&a?"block":"none"})}}]),i}();window.addEventListener("DOMContentLoaded",function(){UI.getProducts(),UI.priceRange(),UI.reduceCategoryList(),UI.displayUserName()}),document.getElementById("add-product").addEventListener("click",function(e){e.preventDefault(),UI.createProduct(),document.querySelector(".product-form-overlay").classList.add("active")});var showMore=document.getElementById("show-more-btn"),showLess=document.getElementById("show-less-btn");showMore.addEventListener("click",function(){UI.increaseCategoryList(),showMore.style.display="none",showLess.style.display="block"}),showLess.addEventListener("click",function(){UI.reduceCategoryList(),showMore.style.display="block",showLess.style.display="none"}),document.querySelector(".log-out").addEventListener("click",function(){UI.logout()});var categoryItems=document.querySelectorAll(".category");categoryItems.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.category;e&&UI.filterByCategory(e)})});
//# sourceMappingURL=products.min.js.map
