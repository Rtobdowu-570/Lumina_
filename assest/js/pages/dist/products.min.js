"use strict";var _productCard=require("../components/product-card.js"),_pocketbase=require("../api/pocketbase.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var UI=function(){function u(){_classCallCheck(this,u)}return _createClass(u,null,[{key:"reduceCategoryList",value:function(){var e=document.querySelectorAll(".category");Array.from(e).forEach(function(e,t){10<=t&&(e.style.display="none")})}},{key:"addProduct",value:function(){var t,r,n,a,o,c,s,i,u,l,d,p,m,g,y,v,f,h,b,w,E,C,k,A,S,x,P,N,L,q,B,I,F,M,R,H,_,G,T,O,U,z,D,V,K,W,J,j,Q,$,X;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("div")).className="product-form-overlay",(r=document.createElement("div")).className="product-form-card",(n=document.createElement("div")).className="product-form-header",(a=document.createElement("div")).className="product-form-header-content",(o=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),o.setAttribute("height","24"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),(c=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"),o.appendChild(c),(s=document.createElement("div")).className="product-form-icon",s.appendChild(o),i=document.createElement("div"),(u=document.createElement("h2")).className="product-form-title",u.textContent="Add New Product",(l=document.createElement("p")).className="product-form-description",l.textContent="Fill in the details to add a product to your store",i.append(u,l),a.append(s,i),(d=document.createElement("button")).className="product-form-close",d.type="button",d.setAttribute("aria-label","Close"),d.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),(p=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.setAttribute("stroke","currentColor"),p.setAttribute("stroke-width","2"),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),(m=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","18"),m.setAttribute("y1","6"),m.setAttribute("x2","6"),m.setAttribute("y2","18"),(g=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","6"),g.setAttribute("y1","6"),g.setAttribute("x2","18"),g.setAttribute("y2","18"),p.append(m,g),d.appendChild(p),n.append(a,d),(y=document.createElement("div")).className="product-form-content",(v=document.createElement("form")).className="product-form",(f=document.createElement("div")).className="form-group",(h=document.createElement("label")).className="form-label",h.setAttribute("for","productName"),h.textContent="Product Name",(b=document.createElement("input")).type="text",b.id="productName",b.className="form-input",b.placeholder="Enter product name",b.required=!0,b.name="name",f.append(h,b),(w=document.createElement("div")).className="form-group",(E=document.createElement("label")).className="form-label",E.textContent="Product Image",(C=document.createElement("div")).className="image-upload-container",(k=document.createElement("label")).className="image-upload-label",(A=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","40"),A.setAttribute("height","40"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.setAttribute("stroke","currentColor"),A.setAttribute("stroke-width","2"),A.setAttribute("stroke-linecap","round"),A.setAttribute("stroke-linejoin","round"),(S=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x","3"),S.setAttribute("y","3"),S.setAttribute("width","18"),S.setAttribute("height","18"),S.setAttribute("rx","2"),S.setAttribute("ry","2"),(x=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","8.5"),x.setAttribute("cy","8.5"),x.setAttribute("r","1.5"),(P=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","21 15 16 10 5 21"),A.append(S,x,P),(N=document.createElement("span")).className="upload-text",N.textContent="Click to upload image",(L=document.createElement("span")).className="upload-subtext",L.textContent="PNG, JPG up to 5MB",(q=document.createElement("input")).type="file",q.className="hidden-input",q.accept="image/*",q.name="image",q.addEventListener("change",function(){var e=q.files[0];e&&(N.textContent=e.name,L.textContent=e.size+" bytes",A.style.display="none")}),k.append(A,N,L,q),C.appendChild(k),w.append(E,C),(B=document.createElement("div")).className="form-group",(I=document.createElement("label")).className="form-label",I.setAttribute("for","category"),I.textContent="Category",(F=document.createElement("select")).id="category",F.className="form-select",F.required=!0,F.name="category",(M=document.createElement("option")).value="",M.textContent="Select a category",["Travel & Luggage","Shoes & Footwear","Kitchen & Dining","Tools & Home Improvement","Musical Instruments","Arts & Crafts","Fitness Equipment","Watches","Bags & Handbags","Gardening & Outdoor Living","Video Games & Consoles","Eyewear & Sunglasses","Bedding & Bath","Camping & Hiking","Party Supplies","Appliances","Mobile Phones & Accessories","Computers & Laptops","Lighting & Fans","Men's Clothing","Women's Clothing","Kids' Clothing","Skincare & Makeup","Vitamins & Supplements","Cycling & Bikes","Board Games & Puzzles","Movies & TV Shows","Beverages & Drinks","Pet Food & Treats","Home Storage & Organization","Baby Essentials","Fine Jewelry","Car Parts & Accessories","Stationery & School Supplies","Outdoor Power Equipment","Electronics","Fashion & Apparel","Home & Garden","Beauty & Personal Care","Health & Wellness","Sports & Outdoors","Toys & Games","Books & Media","Food & Grocery","Pet Supplies","Furniture & Decor","Baby & Kids","Jewelry & Accessories","Automotive","Office Supplies"].forEach(function(e){var t=document.createElement("option");t.value=e.toLowerCase().replace(/ & /g,"-").replace(/[^a-z0-9-]/g,""),t.textContent=e,t.dataset.category=e,F.appendChild(t)}),F.appendChild(M),F.insertBefore(M,F.firstChild),B.append(I,F),(R=document.createElement("div")).className="form-row",(H=document.createElement("div")).className="form-group",(_=document.createElement("label")).className="form-label",_.setAttribute("for","price"),_.textContent="Price",(G=document.createElement("div")).className="price-input-wrapper",(T=document.createElement("span")).className="price-symbol",T.textContent="$",(O=document.createElement("input")).type="number",O.id="price",O.className="form-input price-input",O.placeholder="0.00",O.step="0.01",O.min="0",O.required=!0,O.name="price",G.append(T,O),H.append(_,G),(U=document.createElement("div")).className="form-group",(z=document.createElement("label")).className="form-label",z.setAttribute("for","quantity"),z.textContent="Quantity",(D=document.createElement("input")).type="number",D.id="quantity",D.className="form-input",D.placeholder="0",D.min="0",D.required=!0,D.name="quantity",U.append(z,D),R.append(H,U),(V=document.createElement("div")).className="form-group",(K=document.createElement("label")).className="form-label",K.setAttribute("for","description"),K.textContent="Description",(W=document.createElement("span")).className="optional-text",W.textContent="(Optional)",K.appendChild(W),(J=document.createElement("textarea")).id="description",J.className="form-textarea",J.rows=4,J.placeholder="Enter product description...",J.name="description",V.append(K,J),(j=document.createElement("div")).className="form-actions",(Q=document.createElement("button")).type="submit",Q.className="btn-submit",Q.textContent="Add Product",($=document.createElement("button")).type="button",$.className="btn-cancel",$.textContent="Cancel",$.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),j.append(Q,$),v.append(w,f,B,R,V,j),y.appendChild(v),r.append(n,y),t.appendChild(r),document.body.appendChild(t),X=_pocketbase.pb.authStore.model.id,v.addEventListener("submit",function(t){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={image:q.files[0],name:b.value,category:F.value,price:O.value,quantity:D.value,description:J.value},(n=new FormData).append("image",r.image),n.append("name",r.name),n.append("category",r.category),n.append("price",r.price),n.append("quantity",r.quantity),n.append("description",r.description),n.append("seller",X),e.prev=10,e.next=13,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").create(n));case 13:console.log("Product added successfully"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),console.log("ERROR",e.t0.details);case 19:document.querySelector(".product-form-overlay").classList.remove("active");case 21:case"end":return e.stop()}},null,null,[[10,16]])});case 219:case"end":return e.stop()}})}},{key:"getProducts",value:function(){var t,r,n,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t=1,30,e.prev=3,e.next=6,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getList(t,30,{sort:"-created"}));case 6:if(n=e.sent,a=document.getElementById("products-grid")){e.next=10;break}return e.abrupt("return");case 10:1===r&&(a.innerHTML=""),n.items.forEach(function(e){var t=new _productCard.ProductCard(e);a.appendChild(t.render())}),o=document.querySelector(".next"),t>=n.totalPages?o.disabled=!0:o.disabled=!1,o.addEventListener("click",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:t<n.totalPages&&(t++,r++,u.getProducts());case 1:case"end":return e.stop()}})}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error("Failed to load products:",e.t0);case 20:case"end":return e.stop()}},null,null,[[3,17]])}},{key:"getCategoryCount",value:function(){var t,r,n,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:t={},r=0,n=["Travel & Luggage","Shoes & Footwear","Kitchen & Dining","Tools & Home Improvement","Musical Instruments","Arts & Crafts","Fitness Equipment","Watches","Bags & Handbags","Gardening & Outdoor Living","Video Games & Consoles","Eyewear & Sunglasses","Bedding & Bath","Camping & Hiking","Party Supplies","Appliances","Mobile Phones & Accessories","Computers & Laptops","Lighting & Fans","Men's Clothing","Women's Clothing","Kids' Clothing","Skincare & Makeup","Vitamins & Supplements","Cycling & Bikes","Board Games & Puzzles","Movies & TV Shows","Beverages & Drinks","Pet Food & Treats","Home Storage & Organization","Baby Essentials","Fine Jewelry","Car Parts & Accessories","Stationery & School Supplies","Outdoor Power Equipment","Electronics","Fashion & Apparel","Home & Garden","Beauty & Personal Care","Health & Wellness","Sports & Outdoors","Toys & Games","Books & Media","Food & Grocery","Pet Supplies","Furniture & Decor","Baby & Kids","Jewelry & Accessories","Automotive","Office Supplies"];case 3:if(r<n.length)return a=n[r],e.prev=5,e.next=8,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getList(1,1,{filter:'category="'.concat(a,'"')}));e.next=19;break;case 8:o=e.sent,t[a]=o.totalItems,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Failed to get category count:",e.t0),t[a]=0;case 16:r++,e.next=3;break;case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}},null,null,[[5,12]])}},{key:"getCategoryCount",value:function(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=["Travel & Luggage","Shoes & Footwear","Kitchen & Dining","Tools & Home Improvement","Musical Instruments","Arts & Crafts","Fitness Equipment","Watches","Bags & Handbags","Gardening & Outdoor Living","Video Games & Consoles","Eyewear & Sunglasses","Bedding & Bath","Camping & Hiking","Party Supplies","Appliances","Mobile Phones & Accessories","Computers & Laptops","Lighting & Fans","Men's Clothing","Women's Clothing","Kids' Clothing","Skincare & Makeup","Vitamins & Supplements","Cycling & Bikes","Board Games & Puzzles","Movies & TV Shows","Beverages & Drinks","Pet Food & Treats","Home Storage & Organization","Baby Essentials","Fine Jewelry","Car Parts & Accessories","Stationery & School Supplies","Outdoor Power Equipment","Electronics","Fashion & Apparel","Home & Garden","Beauty & Personal Care","Health & Wellness","Sports & Outdoors","Toys & Games","Books & Media","Food & Grocery","Pet Supplies","Furniture & Decor","Baby & Kids","Jewelry & Accessories","Automotive","Office Supplies"],n={},e.prev=2,e.next=5,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getFullList());case 5:e.sent.forEach(function(e){var t=(e.category||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"and").replace(/[^a-z0-9-]/g,"");n[t]=(n[t]||0)+1}),t.forEach(function(e){var t=e.toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"and").replace(/[^a-z0-9-]/g,"");n[t]=n[t]||0}),document.querySelectorAll(".checkbox-item.category").forEach(function(e){var t=e.getAttribute("data-category"),r=e.querySelector(".checkbox-count");r&&(r.textContent=void 0!==n[t]?n[t]:0)}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Failed to get category count:",e.t0);case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},null,null,[[2,12]])}},{key:"loadNextPage",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPage++,e.next=3,regeneratorRuntime.awrap(this.getProducts(this.currentPage));case 3:case"end":return e.stop()}},null,this)}},{key:"increaseCategoryList",value:function(){var e=document.querySelectorAll(".category"),r=Array.from(e);r.forEach(function(e,t){r.length-1?e.style.display="block":e.style.display="none"})}},{key:"priceRange",value:function(){function r(){var e=n.value/s*100,t=100-a.value/s*100;c.style.left=e+"%",c.style.right=t+"%"}var n=document.querySelector(".range-min"),a=document.querySelector(".range-max"),o=document.querySelector(".input-min"),t=document.querySelector(".input-max"),c=document.querySelector(".price-slider .range-track"),s=parseInt(a.max),i=1e3;n.addEventListener("input",function(){var e=parseInt(n.value),t=parseInt(a.value);t-e<i&&(n.value=t-i),o.value=n.value,r(),u.filterProducts()}),a.addEventListener("input",function(){var e=parseInt(n.value);parseInt(a.value)-e<i&&(a.value=e+i),t.value=a.value,r(),u.filterProducts()}),o.addEventListener("change",function(){var e=parseInt(o.value);e>=parseInt(a.value)-i&&(e=parseInt(a.value)-i,o.value=e),n.value=e,r(),u.filterProducts()}),t.addEventListener("change",function(){var e=parseInt(t.value);e<=parseInt(n.value)+i&&(e=parseInt(n.value)+i,t.value=e),a.value=e,r(),u.filterProducts()}),r()}},{key:"createProduct",value:function(){(0,_pocketbase.isAuthenticated)()?u.addProduct():window.location.href="/public/auth/auth.html"}},{key:"displayUserName",value:function(){var e=(0,_pocketbase.getCurrentUser)(),t=document.querySelector(".user-name");(0,_pocketbase.isAuthenticated)()?e.name?t.textContent=e.name:t.textContent=e.user_name:t.textContent="Guest"}},{key:"logout",value:function(){_pocketbase.pb.authStore.clear(),window.location.href="index.html"}},{key:"filterProducts",value:function(){var o=Array.from(document.querySelectorAll('.category input[type="checkbox"]:checked')).map(function(e){return e.closest(".category").dataset.category}),c=parseInt(document.querySelector(".input-min").value),s=parseInt(document.querySelector(".input-max").value);document.querySelectorAll(".product-cards").forEach(function(e){var t=e.dataset.category,r=parseFloat(e.dataset.price),n=0===o.length||o.includes(t),a=c<=r&&r<=s;e.style.display=n&&a?"block":"none"})}},{key:"filterProductsByPocketBase",value:function(){var s={newest:{sort:"-created"},ascending:{sort:"+price"},descending:{sort:"-price"},popular:{sort:"-quantity"},rated:{sort:"-rating"}},e=document.querySelector(".sort-select");e&&e.addEventListener("change",function(t){var r,n,a,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.value,n=s[r]||{},e.prev=2,e.next=5,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getList(1,30,n));case 5:if(a=e.sent,o=document.getElementById("products-grid")){e.next=9;break}return e.abrupt("return");case 9:o.innerHTML="",a.items.forEach(function(e){var t=new _productCard.ProductCard(e);o.appendChild(t.render())}),e.next=23;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Failed to load products:",e.t0),document.getElementById("products-grid").innerHTML="",(c=document.createElement("div")).className="toast show",c.innerHTML="Error loading products. Please try again later.",document.body.appendChild(c),setTimeout(function(){c.remove()},2e3);case 23:case"end":return e.stop()}},null,null,[[2,13]])})}},{key:"filterByRating",value:function(e){var r=parseFloat(e),t=document.querySelectorAll(".product-cards");Number.isNaN(r)?t.forEach(function(e){return e.style.display=""}):t.forEach(function(e){var t=parseFloat(e.dataset.rating)||0;e.style.display=r<=t?"block":"none"})}},{key:"resetFilters",value:function(){var e=document.querySelectorAll(".product-cards");document.querySelectorAll('.category input[type="checkbox"]').forEach(function(e){e.checked=!1}),document.querySelector(".input-min").value=document.querySelector(".range-min").min,document.querySelector(".input-max").value=document.querySelector(".range-max").max,document.querySelector(".range-min").value=document.querySelector(".range-min").min,document.querySelector(".range-max").value=document.querySelector(".range-max").max;var t=document.querySelector(".price-slider .range-track");t.style.left="0%",t.style.right="0%",e.forEach(function(e){e.style.display="block"})}},{key:"searchProducts",value:function(e){var t=document.querySelectorAll(".product-cards"),r=e.toLowerCase();t.forEach(function(e){e.dataset.name.toLowerCase().includes(r)?e.style.display="block":e.style.display="none"})}}]),u}();window.addEventListener("DOMContentLoaded",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(UI.getProducts());case 2:UI.getCategoryCount(),UI.priceRange(),UI.reduceCategoryList(),UI.displayUserName();case 6:case"end":return e.stop()}})}),document.getElementById("add-product").addEventListener("click",function(e){e.preventDefault(),UI.createProduct(),document.querySelector(".product-form-overlay").classList.add("active")});var showMore=document.getElementById("show-more-btn"),showLess=document.getElementById("show-less-btn");showMore.addEventListener("click",function(){UI.increaseCategoryList(),showMore.style.display="none",showLess.style.display="block"}),showLess.addEventListener("click",function(){UI.reduceCategoryList(),showMore.style.display="block",showLess.style.display="none"}),document.querySelector(".log-out").addEventListener("click",function(){UI.logout()});var reset=document.querySelector(".reset-btn");reset.addEventListener("click",function(){UI.resetFilters()});var searchInput=document.getElementById("search-input");searchInput.addEventListener("input",function(e){var t=e.target.value;UI.searchProducts(t)}),UI.filterProductsByPocketBase();var ratingLabels=document.querySelectorAll(".checkbox-item.rating");ratingLabels.forEach(function(n){n.querySelector('input[type="checkbox"]').addEventListener("change",function(e){if(e.target.checked){var t=n.getAttribute("data-rating"),r=parseFloat(t);UI.filterByRating(r)}else UI.filterByRating(0)})});
//# sourceMappingURL=products.min.js.map
