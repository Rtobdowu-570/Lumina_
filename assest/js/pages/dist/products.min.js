"use strict";var _productCard=require("../components/product-card.js"),_pocketbase=require("../api/pocketbase.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var UI=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"reduceCategoryList",value:function(){var e=document.querySelectorAll(".category");Array.from(e).forEach(function(e,t){10<=t&&(e.style.display="none")})}},{key:"addProduct",value:function(){var t,r,n,a,o,c,s,u,i,l,d,m,p,y,v,f,g,b,h,E,w,k,C,A,x,N,S,q,L,P,I,B,F,_,M,U,R,H,T,G,O,D,j,z,V,J,K,W,Q,$;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("div")).className="product-form-overlay",(r=document.createElement("div")).className="product-form-card",(n=document.createElement("div")).className="product-form-header",(a=document.createElement("div")).className="product-form-header-content",(o=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),o.setAttribute("height","24"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),(c=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"),o.appendChild(c),(s=document.createElement("div")).className="product-form-icon",s.appendChild(o),u=document.createElement("div"),(i=document.createElement("h2")).className="product-form-title",i.textContent="Add New Product",(l=document.createElement("p")).className="product-form-description",l.textContent="Fill in the details to add a product to your store",u.append(i,l),a.append(s,u),(d=document.createElement("button")).className="product-form-close",d.type="button",d.setAttribute("aria-label","Close"),d.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),(m=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","24"),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.setAttribute("stroke","currentColor"),m.setAttribute("stroke-width","2"),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),(p=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","18"),p.setAttribute("y1","6"),p.setAttribute("x2","6"),p.setAttribute("y2","18"),(y=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("x1","6"),y.setAttribute("y1","6"),y.setAttribute("x2","18"),y.setAttribute("y2","18"),m.append(p,y),d.appendChild(m),n.append(a,d),(v=document.createElement("div")).className="product-form-content",(f=document.createElement("form")).className="product-form",(g=document.createElement("div")).className="form-group",(b=document.createElement("label")).className="form-label",b.setAttribute("for","productName"),b.textContent="Product Name",(h=document.createElement("input")).type="text",h.id="productName",h.className="form-input",h.placeholder="Enter product name",h.required=!0,h.name="name",g.append(b,h),(E=document.createElement("div")).className="form-group",(w=document.createElement("label")).className="form-label",w.textContent="Product Image",(k=document.createElement("div")).className="image-upload-container",(C=document.createElement("label")).className="image-upload-label",(A=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width","40"),A.setAttribute("height","40"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.setAttribute("stroke","currentColor"),A.setAttribute("stroke-width","2"),A.setAttribute("stroke-linecap","round"),A.setAttribute("stroke-linejoin","round"),(x=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x","3"),x.setAttribute("y","3"),x.setAttribute("width","18"),x.setAttribute("height","18"),x.setAttribute("rx","2"),x.setAttribute("ry","2"),(N=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","8.5"),N.setAttribute("cy","8.5"),N.setAttribute("r","1.5"),(S=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","21 15 16 10 5 21"),A.append(x,N,S),(q=document.createElement("span")).className="upload-text",q.textContent="Click to upload image",(L=document.createElement("span")).className="upload-subtext",L.textContent="PNG, JPG up to 5MB",(P=document.createElement("input")).type="file",P.className="hidden-input",P.accept="image/*",P.name="image",P.addEventListener("change",function(){var e=P.files[0];e&&(q.textContent=e.name,L.textContent=e.size+" bytes",A.style.display="none")}),C.append(A,q,L,P),k.appendChild(C),E.append(w,k),(I=document.createElement("div")).className="form-group",(B=document.createElement("label")).className="form-label",B.setAttribute("for","category"),B.textContent="Category",(F=document.createElement("select")).id="category",F.className="form-select",F.required=!0,F.name="category",(_=document.createElement("option")).value="",_.textContent="Select a category",["Travel & Luggage","Shoes & Footwear","Kitchen & Dining","Tools & Home Improvement","Musical Instruments","Arts & Crafts","Fitness Equipment","Watches","Bags & Handbags","Gardening & Outdoor Living","Video Games & Consoles","Eyewear & Sunglasses","Bedding & Bath","Camping & Hiking","Party Supplies","Appliances","Mobile Phones & Accessories","Computers & Laptops","Lighting & Fans","Men's Clothing","Women's Clothing","Kids' Clothing","Skincare & Makeup","Vitamins & Supplements","Cycling & Bikes","Board Games & Puzzles","Movies & TV Shows","Beverages & Drinks","Pet Food & Treats","Home Storage & Organization","Baby Essentials","Fine Jewelry","Car Parts & Accessories","Stationery & School Supplies","Outdoor Power Equipment","Electronics","Fashion & Apparel","Home & Garden","Beauty & Personal Care","Health & Wellness","Sports & Outdoors","Toys & Games","Books & Media","Food & Grocery","Pet Supplies","Furniture & Decor","Baby & Kids","Jewelry & Accessories","Automotive","Office Supplies"].forEach(function(e){var t=document.createElement("option");t.value=e.toLowerCase().replace(/ & /g,"-").replace(/[^a-z0-9-]/g,""),t.textContent=e,t.dataset.category=e,F.appendChild(t)}),F.appendChild(_),F.insertBefore(_,F.firstChild),I.append(B,F),(M=document.createElement("div")).className="form-row",(U=document.createElement("div")).className="form-group",(R=document.createElement("label")).className="form-label",R.setAttribute("for","price"),R.textContent="Price",(H=document.createElement("div")).className="price-input-wrapper",(T=document.createElement("span")).className="price-symbol",T.textContent="$",(G=document.createElement("input")).type="number",G.id="price",G.className="form-input price-input",G.placeholder="0.00",G.step="0.01",G.min="0",G.required=!0,G.name="price",H.append(T,G),U.append(R,H),(O=document.createElement("div")).className="form-group",(D=document.createElement("label")).className="form-label",D.setAttribute("for","quantity"),D.textContent="Quantity",(j=document.createElement("input")).type="number",j.id="quantity",j.className="form-input",j.placeholder="0",j.min="0",j.required=!0,j.name="quantity",O.append(D,j),M.append(U,O),(z=document.createElement("div")).className="form-group",(V=document.createElement("label")).className="form-label",V.setAttribute("for","description"),V.textContent="Description",(J=document.createElement("span")).className="optional-text",J.textContent="(Optional)",V.appendChild(J),(K=document.createElement("textarea")).id="description",K.className="form-textarea",K.rows=4,K.placeholder="Enter product description...",K.name="description",z.append(V,K),(W=document.createElement("div")).className="form-actions",(Q=document.createElement("button")).type="submit",Q.className="btn-submit",Q.textContent="Add Product",($=document.createElement("button")).type="button",$.className="btn-cancel",$.textContent="Cancel",$.addEventListener("click",function(){document.querySelector(".product-form-overlay").classList.remove("active")}),W.append(Q,$),f.append(E,g,I,M,z,W),v.appendChild(f),r.append(n,v),t.appendChild(r),document.body.appendChild(t),f.addEventListener("submit",function(t){var r,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={image:P.files[0],name:h.value,category:F.value,price:G.value,quantity:j.value,description:K.value},(n=new FormData).append("image",r.image),n.append("name",r.name),n.append("category",r.category),n.append("price",r.price),n.append("quantity",r.quantity),n.append("description",r.description),e.prev=9,e.next=12,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").create(n));case 12:console.log("Product added successfully"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.log("ERROR",e.t0.details);case 18:document.querySelector(".product-form-overlay").classList.remove("active");case 20:case"end":return e.stop()}},null,null,[[9,15]])});case 218:case"end":return e.stop()}})}},{key:"getProducts",value:function(){var t,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getFullList());case 3:if(t=e.sent,r=document.getElementById("products-grid")){e.next=7;break}return e.abrupt("return");case 7:r.innerHTML="",t.forEach(function(e){var t=new _productCard.ProductCard(e);r.appendChild(t.render())}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Failed to load products:",e.t0);case 14:case"end":return e.stop()}},null,null,[[0,11]])}},{key:"increaseCategoryList",value:function(){var e=document.querySelectorAll(".category"),r=Array.from(e);r.forEach(function(e,t){r.length-1?e.style.display="block":e.style.display="none"})}},{key:"priceRange",value:function(){function r(){var e=n.value/s*100,t=100-a.value/s*100;c.style.left=e+"%",c.style.right=t+"%"}var n=document.querySelector(".range-min"),a=document.querySelector(".range-max"),o=document.querySelector(".input-min"),t=document.querySelector(".input-max"),c=document.querySelector(".price-slider .range-track"),s=parseInt(a.max),u=1e3;n.addEventListener("input",function(){var e=parseInt(n.value),t=parseInt(a.value);t-e<u&&(n.value=t-u),o.value=n.value,r(),i.filterProducts()}),a.addEventListener("input",function(){var e=parseInt(n.value);parseInt(a.value)-e<u&&(a.value=e+u),t.value=a.value,r(),i.filterProducts()}),o.addEventListener("change",function(){var e=parseInt(o.value);e>=parseInt(a.value)-u&&(e=parseInt(a.value)-u,o.value=e),n.value=e,r(),i.filterProducts()}),t.addEventListener("change",function(){var e=parseInt(t.value);e<=parseInt(n.value)+u&&(e=parseInt(n.value)+u,t.value=e),a.value=e,r(),i.filterProducts()}),r()}},{key:"createProduct",value:function(){(0,_pocketbase.isAuthenticated)()?i.addProduct():window.location.href="/public/auth/auth.html"}},{key:"displayUserName",value:function(){var e=(0,_pocketbase.getCurrentUser)(),t=document.querySelector(".user-name");(0,_pocketbase.isAuthenticated)()?e.name?t.textContent=e.name:t.textContent=e.user_name:t.textContent="Guest"}},{key:"logout",value:function(){_pocketbase.pb.authStore.clear(),window.location.href="index.html"}},{key:"filterProducts",value:function(){var o=Array.from(document.querySelectorAll('.category input[type="checkbox"]:checked')).map(function(e){return e.closest(".category").dataset.category}),c=parseInt(document.querySelector(".input-min").value),s=parseInt(document.querySelector(".input-max").value);document.querySelectorAll(".product-cards").forEach(function(e){var t=e.dataset.category,r=parseFloat(e.dataset.price),n=0===o.length||o.includes(t),a=c<=r&&r<=s;e.style.display=n&&a?"block":"none"})}},{key:"filterProductsByPocketBase",value:function(){var s={newest:{sort:"-created"},ascending:{sort:"+price"},descending:{sort:"-price"},popular:{sort:"-quantity"},rated:{sort:"-rating"}},e=document.querySelector(".sort-select");e&&e.addEventListener("change",function(t){var r,n,a,o,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.value,n=s[r]||{},e.prev=2,e.next=5,regeneratorRuntime.awrap(_pocketbase.pb.collection("products").getList(1,30,n));case 5:if(a=e.sent,o=document.getElementById("products-grid")){e.next=9;break}return e.abrupt("return");case 9:o.innerHTML="",a.items.forEach(function(e){var t=new _productCard.ProductCard(e);o.appendChild(t.render())}),e.next=23;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Failed to load products:",e.t0),document.getElementById("products-grid").innerHTML="",(c=document.createElement("div")).className="toast show",c.innerHTML="Error loading products. Please try again later.",document.body.appendChild(c),setTimeout(function(){c.remove()},2e3);case 23:case"end":return e.stop()}},null,null,[[2,13]])})}},{key:"filterByRating",value:function(e){var r=parseFloat(e),t=document.querySelectorAll(".product-cards");Number.isNaN(r)?t.forEach(function(e){return e.style.display=""}):t.forEach(function(e){var t=parseFloat(e.dataset.rating)||0;e.style.display=r<=t?"block":"none"})}},{key:"resetFilters",value:function(){var e=document.querySelectorAll(".product-cards");document.querySelectorAll('.category input[type="checkbox"]').forEach(function(e){e.checked=!1}),document.querySelector(".input-min").value=document.querySelector(".range-min").min,document.querySelector(".input-max").value=document.querySelector(".range-max").max,document.querySelector(".range-min").value=document.querySelector(".range-min").min,document.querySelector(".range-max").value=document.querySelector(".range-max").max;var t=document.querySelector(".price-slider .range-track");t.style.left="0%",t.style.right="0%",e.forEach(function(e){e.style.display="block"})}},{key:"searchProducts",value:function(e){var t=document.querySelectorAll(".product-cards"),r=e.toLowerCase();t.forEach(function(e){e.dataset.name.toLowerCase().includes(r)?e.style.display="block":e.style.display="none"})}}]),i}();window.addEventListener("DOMContentLoaded",function(){UI.getProducts(),UI.priceRange(),UI.reduceCategoryList(),UI.displayUserName()}),document.getElementById("add-product").addEventListener("click",function(e){e.preventDefault(),UI.createProduct(),document.querySelector(".product-form-overlay").classList.add("active")});var showMore=document.getElementById("show-more-btn"),showLess=document.getElementById("show-less-btn");showMore.addEventListener("click",function(){UI.increaseCategoryList(),showMore.style.display="none",showLess.style.display="block"}),showLess.addEventListener("click",function(){UI.reduceCategoryList(),showMore.style.display="block",showLess.style.display="none"}),document.querySelector(".log-out").addEventListener("click",function(){UI.logout()});var reset=document.querySelector(".reset-btn");reset.addEventListener("click",function(){UI.resetFilters()});var searchInput=document.getElementById("search-input");searchInput.addEventListener("input",function(e){var t=e.target.value;UI.searchProducts(t)}),UI.filterProductsByPocketBase();var ratingLabels=document.querySelectorAll(".checkbox-item.rating");ratingLabels.forEach(function(n){n.querySelector('input[type="checkbox"]').addEventListener("change",function(e){if(e.target.checked){var t=n.getAttribute("data-rating"),r=parseFloat(t);UI.filterByRating(r)}else UI.filterByRating(0)})});
//# sourceMappingURL=products.min.js.map
