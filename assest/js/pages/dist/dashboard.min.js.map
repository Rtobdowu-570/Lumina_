{"version":3,"sources":["dashboard.js"],"names":["_pocketbase","require","checkAuth","isAuthenticated","window","location","href","displayUsername","user","getCurrentUser","userName","document","querySelector","name","textContent","user_name","pb","authStore","model","logOut","userId","output","container","regeneratorRuntime","async","_context","prev","next","abrupt","id","awrap","collection","getOne","sent","concat","avatar","email","innerHTML","console","log","warn","t0","error","stop","addEventListener","displayUserData"],"mappings":"oMAAA,IAAAA,YAAAC,QAAA,wBAGA,SAASC,aACA,EAAAF,YAAAG,qBACDC,OAAOC,SAASC,KAAO,0BAI/B,SAASC,kBATT,IAAAC,EAAAC,iBAWUC,EAAWC,SAASC,cAAc,eAR5C,EAAAZ,YAAAG,mBACSK,EAAAK,KACDT,EAAOC,YAAgBG,EAAAK,KAE9BH,EAAAI,YAAAN,EAAAO,UAISL,EAAQI,YAAYF,QAItBF,SAAAA,iBACD,OAAMM,YAAAA,GAAAC,UAAAC,MAGR,SACIC,SACHT,YAAAA,GAAAA,UAASI,QACdV,OAAAC,SAAAC,KAAA,mBAGD,SAASG,kBAAT,IAAAW,EAAAZ,EAAAa,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,IACWX,EAAAA,YAAAA,mBADX,CAAAS,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAG,OAAA,UAAA,KAAA,EAAA,GAECR,EAAAJ,YAAAA,GAAAC,UAAAC,MAAAF,YAAAA,GAAAC,UAAAC,MAAAW,GAAA,KAFD,CAAAJ,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAG,OAAA,UAAA,KAAA,EAAA,OAAAH,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAO,MAe2Bd,YAAAA,GAAGe,WAAW,SAASC,OAAOZ,IAfzD,KAAA,EAecZ,EAfdiB,EAAAQ,KAOCZ,EAPD,2EAAAa,OASA1B,EAAA2B,QAAA,iCATA,WAAAD,OASA1B,EAAAK,MAAA,GATA,yIAAAqB,OASA1B,EAAAK,MAAA,GATA,sbAAAqB,OASA1B,EAAA4B,OAAA,GATA,mCA6Bcd,EAAYX,SAASC,cAAc,iBAErCU,EAAUe,UAAYhB,EAtBlCiB,QAAAC,IAAA,2BAAAjB,IAyBYgB,QAAQE,KAAK,oCAlCzBf,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,MAAA,GASAa,QAAAI,MAAA,gCAAAjB,EAAAgB,IATA,KAAA,GAAA,IAAA,MAAA,OAAAhB,EAAAkB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,MAyCAhC,SAASiC,iBAAiB,mBAAoB,WAhC9C1C,YAAAK,kBAAAsC","file":"dashboard.min.js","sourcesContent":["import { pb, isAuthenticated } from '../api/pocketbase.js';\n\n// prevent user from viewing dashboard if not logged in\nfunction checkAuth() {\n    if (!isAuthenticated()) {\n        window.location.href = '/public/auth/auth.html';\n    }\n}\n\nfunction displayUsername() {\n    const user =  getCurrentUser()\n    const userName = document.querySelector('.user-name');\n\n    if (isAuthenticated()) {\n      if(user.name) {\n        userName.textContent = user.name;\n      } else {\n        userName.textContent = user.user_name;\n      }\n    }\n    else {\n      userName.textContent = \"Guest\";\n}\n}\n\nfunction getCurrentUser() {\n    return pb.authStore.model;\n}\n\nfunction logOut() {\n    pb.authStore.clear(); \n    window.location.href = '/auth/login.html';\n}\n\nasync function displayUserData() {\n    if (!isAuthenticated()) return;\n    const userId = pb.authStore.model ? pb.authStore.model.id : null;\n    if (!userId) return;\n\n    try {\n        const user = await pb.collection('users').getOne(userId);\n\n        const output = `\n                <div class=\"stat-img\">\n                    <img src=\"${user.avatar || '/assest/images/placeholder.jpg'}\" alt=\"${user.name || ''}\" class=\"user-avatar stat\"></div>\n                <div class=\"stat-content user-data\">\n                    <div class=\"stat-value\">${user.name || ''} <span class=\"edit-profile-btn\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#FF5C5C\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"></path>\n                    </svg>\n                    </span></div>\n                    <div class=\"stat-label\">${user.email || ''}</div>\n                </div>`;\n        \n        const container = document.querySelector('.user-stats');\n        if (container) {\n            container.innerHTML = output;\n            console.log('User data rendered into:', container);\n        } else {\n            console.warn('No container found for user data');\n        }\n    } catch (err) {\n        console.error('Failed to fetch current user:', err);\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    checkAuth();\n    displayUsername();\n    displayUserData();\n});\n\nexport { logOut, getCurrentUser, checkAuth, displayUsername };"]}