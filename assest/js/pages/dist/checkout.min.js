"use strict";var _pocketbase=require("../api/pocketbase.js");function getProductAddedToCart(){var o,e,r,n,c,a,i,s,u,d,l,p=arguments;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return o=0<p.length&&void 0!==p[0]?p[0]:.001,t.next=3,regeneratorRuntime.awrap(_pocketbase.pb.collection("cart").getFullList({filter:'user = "'.concat(getCurrentUser().id,'"'),expand:"product"}));case 3:e=t.sent,r=document.querySelector(".order-items"),n=document.querySelector(".first"),c=document.querySelector(".second"),a=document.querySelector(".third"),i=document.querySelector(".last"),u=s=0,5e-4,r.innerHTML="",e.forEach(function(t){var e=t.expand.product,n=e.price*t.quantity;s+=n,u+=e.price*o*t.quantity,r.innerHTML+='\n            <div class="order-item">\n                <div class="item-info">\n                    <span class="item-name">'.concat(e.name,'</span>\n                    <span class="item-qty">Qty: ').concat(t.quantity,'</span>\n                </div>\n                <span class="item-price">$').concat(n.toFixed(2),"</span>\n            </div>\n        ")}),l=s+u+(d=5e-4*s),n&&(n.textContent=s.toFixed(2)),c&&(c.textContent=u.toFixed(2)),a&&(a.textContent=d.toFixed(2)),i&&(i.textContent=l.toFixed(2));case 20:case"end":return t.stop()}})}function checkAuth(){(0,_pocketbase.isAuthenticated)()||(window.location.href="/public/auth/auth.html")}function displayUsername(){var t=getCurrentUser(),e=document.querySelector(".user-name");(0,_pocketbase.isAuthenticated)()?t.name?e.textContent=t.name:e.textContent=t.user_name:e.textContent="Guest"}function getCurrentUser(){return _pocketbase.pb.authStore.model}function logOut(){_pocketbase.pb.authStore.clear(),window.location.href="/auth/login.html"}document.addEventListener("DOMContentLoaded",function(){checkAuth(),displayUsername(),getProductAddedToCart()});var logOutBtn=document.querySelector(".log-out");logOutBtn.addEventListener("click",function(){logOut()});var multiTabs=document.querySelectorAll(".payment-option, .shipping-option");multiTabs.forEach(function(e){e.addEventListener("click",function(){var t=e.classList.contains("payment-option")?"payment-option":"shipping-option";document.querySelectorAll("."+t).forEach(function(t){return t.classList.remove("active")}),e.classList.add("active")})});var options=document.querySelectorAll("[data-fee]");options.forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.fee.toLowerCase();document.querySelectorAll("[data-fee]").forEach(function(t){return t.classList.remove("active")}),e.classList.add("active"),"standard"===t?getProductAddedToCart(.001):"express"===t?getProductAddedToCart(.004):"overnight"===t&&getProductAddedToCart(.007)})});
//# sourceMappingURL=checkout.min.js.map
