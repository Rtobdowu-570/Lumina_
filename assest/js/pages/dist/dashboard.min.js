"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logOut=logOut,exports.getCurrentUser=getCurrentUser,exports.checkAuth=checkAuth,exports.displayUsername=displayUsername;var _pocketbase=require("../api/pocketbase.js");function checkAuth(){(0,_pocketbase.isAuthenticated)()||(window.location.href="/public/auth/auth.html")}function displayUsername(){var e=getCurrentUser(),t=document.querySelector(".user-name");(0,_pocketbase.isAuthenticated)()?e.name?t.textContent=e.name:t.textContent=e.user_name:t.textContent="Guest"}function getCurrentUser(){return _pocketbase.pb.authStore.model}function logOut(){_pocketbase.pb.authStore.clear(),window.location.href="/auth/login.html"}function displayUserData(){var t,n,a,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,_pocketbase.isAuthenticated)()){e.next=2;break}return e.abrupt("return");case 2:if(t=_pocketbase.pb.authStore.model?_pocketbase.pb.authStore.model.id:null){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,regeneratorRuntime.awrap(_pocketbase.pb.collection("users").getOne(t));case 8:n=e.sent,a='\n                <div class="stat-img">\n                    <img src="'.concat(n.avatar||"/assest/images/placeholder.jpg",'" alt="').concat(n.name||"",'" class="user-avatar stat"></div>\n                <div class="stat-content user-data">\n                    <div class="stat-value">').concat(n.name||"",' <span class="edit-profile-btn">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF5C5C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n                    <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>\n                    </svg>\n                    </span></div>\n                    <div class="stat-label">').concat(n.email||"","</div>\n                </div>"),(r=document.querySelector(".user-stats"))?(r.innerHTML=a,console.log("User data rendered into:",r)):console.warn("No container found for user data"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("Failed to fetch current user:",e.t0);case 17:case"end":return e.stop()}},null,null,[[5,14]])}document.addEventListener("DOMContentLoaded",function(){checkAuth(),displayUsername(),displayUserData()});
//# sourceMappingURL=dashboard.min.js.map
